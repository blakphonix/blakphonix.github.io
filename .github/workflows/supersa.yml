name: Sync Huge Image Folder
on: 
  workflow_dispatch: # Allows you to run this manually

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout your repo
        uses: actions/checkout@v4
        with:
          path: my_site

      - name: Checkout source images (barmgaa/supersa)
        uses: actions/checkout@v4
        with:
          repository: barmgaa/supersa
          path: source_repo

      - name: Copy images to target directory
        run: |
          # Create the nested directory path
          mkdir -p my_site/images/supersa
          
          # Copy everything from the source images folder to your new folder
          cp -r source_repo/images/* my_site/images/supersa/
          
      - name: Commit and Push changes
        run: |
          cd my_site
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add .
          # Only commit if there are actually changes to avoid errors
          git diff --quiet && git diff --staged --quiet || (git commit -m "Synced images from barmgaa/supersa" && git push)
